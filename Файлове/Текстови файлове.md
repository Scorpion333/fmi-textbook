# Текстови файлове

fstream ни предлага няколко класа, с помощта на които можем да четем от файлове и да пишем във файлове.
Обектите от тези класове не могат да се копират, можем да ги подаваме на функция само като референции.

## ifstream

Класът за четене от файлове ifstream работи така - при отваряне на текстов файл, един
указател се насочва към символа в началото на файла. При прочитане на информация от
файла, указателят се мести, като това е възможно, докато не се достигне края на файла.
Някои от методите на класа са:

* За отваряне и затваряне на файл
  * open (const char* filename) - отваря файла с подаденото име, т.е. насочва указателя към началния символ във файла
  * close() - затваря файла, позволявайки да бъде отворен друг файл
  * is_open() - ако има отворен файл, връща true, иначе връща false

* За четене
  * operator >> - чете от файла
  * get() - връща символа, сочен от указателя, и премества указателя с една позиция
  * peek() - връща символа, сочен от указателя, без да го мести
  * getline(char* str, unsigned n) - чете низа str до края на реда, т.е. до достигане на символ '\n', като могат да бъдат прочетени най-много n символа
  * read(char* buffer, unsigned n) - чете n символа от файла и ги записва в паметта след указателя buffer. Използва се по-често за двоични файлове.

* Други
  * eof() - този булев метод връща true, ако указателят за четене е достигнал края на файла (End Of File) и false в противен случай

От дясната страна на оператора \>\> може да стоят различни типове - число, символ, низ (char*) или клас, за който сме дефинирали оператора.
Дейстивето на оператора е различно, в зависимост от типа отдясно и това накъде сочи указателят във файла - дали е достигнал края на файла и
какъв символ сочи. (Интервалите, знаците за нов ред и табулациите не се записват, но се използват за разделители.)

<table>
  <tr>
    <td> </td>
    <td>Указателят сочи символ,<br>
        който не е ' ', '\n', '\t'<br>
        или цифра</td> 
    <td>Указателят сочи<br>
        цифра</td>
    <td>Указателят сочи<br>
        ' ', '\n' или '\t'</td> 
    <td>Краят на файла<br>
        е достигнат</td>
  </tr>
  
  <tr>
    <td>Чете се<br>
        един символ</td>
    <td>Символът се прочита и<br>
        указателят се премества<br>
        с една позиция.</td> 
    <td>Същото – цифрата<br>
        се третира като<br>
        обикновен символ.</td>
    <td>Указателят се<br>
        мести, докато<br>
        не попаднем в<br>
        някой от другите<br>
        три случая.</td> 
    <td>Нищо не се<br>
        прочита.</td>
  </tr>
  
  <tr>
    <td>Чете се<br>
        низ (char*)</td>
    <td>Прочитат се символите<br>
        (и указателят се мести),<br>
        докато не се достигне ‘ ’,<br>
        ‘\n’, ‘\t’ или края на файла.</td> 
    <td>Същото – цифрата<br>
        се третира като<br>
        обикновен символ.</td>
    <td>Указателят се<br>
        мести, докато<br>
        не попаднем в<br>
        някой от другите<br>
        три случая.</td> 
    <td>Нищо не се<br>
        прочита.</td>
  </tr>
  
  <tr>
    <td>Чете се<br>
        число</td>
    <td>Нищо не се прочита, но<br>
        stream-ът се поврежда и<br>
        вече не може да прочетем<br>
        нищо от него – всеки път,<br>
        когато се опитаме, нищо<br>
        няма да се прочете. Тази<br>
        ситуация трябва да се<br>
        избягва.</td>
    <td>Числото се чете,<br>
        докато не се<br>
        достигне края на<br>
        файла или символ,<br>
        различен от цифра.</td>
    <td>Указателят се<br>
        мести, докато<br>
        не попаднем в<br>
        някой от другите<br>
        три случая.</td> 
    <td>Нищо не се<br>
        прочита.</td>
  </tr> 
</table>

## getline

Този метод работи по-различно. При него интервалите и табулациите се записват в низа като обикновени символи.
При достигане на '\n' записването спира и указателят във файла се насочва към символа след '\n'.

## ofstream

С класа за писане във файлове ofstream се работи по-лесно, защото има по-малко особени ситуации. Най-важните методи на класа са:

- open (const char* filename) - отваря файла с подаденото име от компютъра
- close() - затваря файла, позволявайки да бъде отворен друг файл
- operator << - записва във файла
- write(char* buffer, unsigned n) - записва във файла n символа, започвайки от този, сочен от указателя. Използва се по-често за двоични файлове.

## istream и ostream

Тези класове доста приличат на ifstream и ofstream, но не са обвързани с файлове. cin и cout са обекти от тези класове.
ifstream всъщност е наследник на istream, a ofstream - на ostream, затова:

- Ако дефинираме функция за istream, тя може да приеме ifstream.
- Ако дефинираме функция за ostream, тя може да приеме ofstream.

Това се ползва най-вече когато дефинираме

## оператори << и >> за класове

Не ги дефинираме като методи, а като външни функции, за да може от лявата страна на оператора да стои stream-ът, а отдясно -
обектът от нашия клас.
Удобно е да можем да достъпваме член-данните на класа в тези оператори, затова обикновено ги правим "приятели" на класа.
Добре е операторите да връщат стойност - референция към stream-a.
