# Двоични файлове

Когато обработваме файл като двоичен, ние го четем байт по байт, т.е. интересуваме се буквално от всяка 0 и единица във файла.
Писането във файла също става байт по байт.

Всъщност, можем да разглеждаме двоичния файл като масив от байтове, т.е числа от 0 до 255.

Тъй като типът char заема точно 1 байт в паметта и има точно 256 възможни стойности
([по-подробно за паметта](https://github.com/Scorpion333/fmi-oop-2017/blob/master/Теория/Файлове%20и%20памет/Представяне%20на%20величините%20в%20паметта.md)),
всеки байт може да се разглежда като стойност от тип char. 

И така, всеки двоичен файл може да се разглежда като масив от char-ове. Това ни позволява да четем и пишем байтове във файла,
използвайки две функции за четене и писане на ASCII символи, а именно методите
[ifstream::read и ofstream::write](https://github.com/Scorpion333/fmi-oop-2017/blob/master/Теория/Файлове%20и%20памет/Методите%20read%20и%20write%20за%20текстови%20файлове.md).

## Писане в двоичен файл

Общата идея е: ако искаме да запишем във файла променлива, чийто размер e N байта, то
прочитаме N байта от паметта, започвайки от адреса на променливата и ги записваме във файла.
Ако не знаем размера на променливата, можем да разберем чрез [sizeof](https://github.com/Scorpion333/fmi-oop-2017/blob/master/Теория/Файлове%20и%20памет/Sizeof.md).

    ofstream bin_out("BinFile.bin", ios::binary);
    
    // Най-простият случай е писането на символ
    char sym = 'X';
    bin_out.write(&sym, 1);       // Прочита се един байт - този на адреса на sym, който в случая е самият символ,
                                  // и той се записва във файла.

    // Ако записваме число, ще има повече байтове
    int n = 17;
    unsigned bytes = sizeof(int);         // Вече знаем - int заема bytes байта
    bin_out.write((char*)&n, bytes);      // Прочитаме bytes байта, започвайки от адреса на n
    
Кастването към char* е необходимо, защото write приема char*.
И е легално, защото &n е от тип int*, а указателите (поне на примитивните типове) могат лесно да се кастват един към друг. 

В общия случай, ако имаме променлива var от тип Т, синтаксисът е:

    bin_out.write((char*)&var, sizeof(T));
    
## Четене от двоичен файл

Аналогично на писането, ако искаме да прочетем променлива с размер N байта, прочитаме N байта от файла и
ги записваме в паметта на компютъра, започвайки от адреса на променливата.

    ifstream bin_in("BinFile.bin", ios::binary);
    
    char sym;
    bin_in.read(&sym, 1);
    
    int n;
    bin_in.read((char*)&n, sizeof(int));
    
    long big_number;
    bin_in.read((char*)&big_number, sizeof(long));
